# GSpot Frontend

## Структура папок
### App
Папка app содержит настройки маршрутизации для всего сервиса.

Соглашение о файлах:
- layout.js  
Пользовательский интерфейс, который используется совместно между маршрутами.

- page.js  
Пользовательский интерфейс, уникальный для маршрута.

- loading.js  
Состояние загрузки, пока контент страницы еще не загружен.

- error.js  
Сообщение, которое будет отображено пользователю в момент возникновения ошибки.

- not-found.js  

- route.js  
Пользовательский обработчик запросов для данного маршрута, подобный вызову api endpoint.


### components
Папка components содержит все компоненты React, которые используются глобально.

### features
Папка features содержит модули, относящиеся к конкретной функциональности.

### lib
Папка lib содержит библиотеки или пакеты, которые используются в приложении.

### public
Папка public содержит медиа файлы, которые могут быть необходимы для отображения на сайте.


### utils 
Папка utils содержит различные утилиты и функции, которые используются в приложении. Каждый файл содержит толлько одну функцию, название файла определяется названием функции.


## Установка и запуск
Перед началом работы необходимо установить все необходимые файлы, которые нужны для работы с проектом. Выполните `npm i` или `npm install`.  

Выполнение этой команды также добавит git hook для работы автоматического форматирования кода (см. [Husky](https://typicode.github.io/husky/#/)). В дальнейшем каждый локальный коммит будет автоматически форматировать все файлы с расширением `.js`, `.jsx`, `.ts`, `.tsx`. Чтобы изменить это поведение используйте файлы `.lintstagedrc`, `.husky/pre-commit` в корне проекта.

### Локальная разработка
#### Используя Docker
Для запуска проекта в dev режиме используется docker-compose. Чтобы запустить проект необходимо выполнить:
```
docker-compose up
```
Эта команда создаст контейнер Docker и запустит внутри него веб сервер. Docker Compose в этом случае позволяет автоматически перезапускать веб сервер при изменении файлов исходного кода проекта.   

#### Без использования Docker
```
npm run dev
```  
Запускает приложение в режиме разработки на порту `3000`.

```
npm run build
```  
Собирает приложение для production режима.

```
npm start
```  
Запускает приложение в production режиме.

### Развертывание на сервере
Необходимо скомпилировать файлы в единый контейнер для дальнейшего деплоя. Используйте команду `make build` или:
```
docker build -f Dockerfile.prod -t gspot-frontend:latest .
```

Для запуска скомпилированного контейнера используйте команду `make run` или:
```
docker run --name gspot_production_frontend -d -p 3000:3000 gspot-frontend:latest
```

## Разработка
Необходимо сделать форк текущего репозитория в свой аккаунт. Сделав необходимые изменения, создайте pull request.


## CI/CD
- Retrieve your Vercel [Access Token](https://vercel.com/guides/how-do-i-use-a-vercel-api-access-token);
- Install the [Vercel CLI](https://vercel.com/docs/cli) and run vercel login;
- Inside your folder, run vercel link to create a new Vercel project;
- Inside the generated `.vercel` folder, save the `projectId` and `orgId` from the `project.json`;
- Inside GitHub, add `VERCEL_TOKEN`, `VERCEL_ORG_ID`, and `VERCEL_PROJECT_ID` as secrets
